#ifndef TETRIS_H
#define TETRIS_H

#include <iostream>
#include <string>
#include <SFML/Graphics.hpp>
#include <time.h>
#include <stdlib.h>
using std::cout;
using std::endl;

class Game
{
   
 public:
    Game();
    ~Game(){};
    void handleInput();
    void loadTextures();
    void update(char board[20][10]);
    void render(char board[20][10]);
    bool isDone() const;
    int WINDOW_SIZE_X = 700;
    int WINDOW_SIZE_Y = 650;
    // Each block is sized to BLOCK_SIZE + (BORDER_SIZE * 2)
    int BLOCK_SIZE = 28;
    int BORDER_SIZE = 1;
    int posX = 0;
 private:
    sf::RenderWindow mWindow;
    bool mIsDone;
    sf::RectangleShape square;
    sf::RectangleShape boardSprite;
    sf::Texture art;
    sf::Vector2i mIncrement;
    void moveCherry();
   
};

class Block {

 public:
   virtual void rotate() = 0; // I'm not sure about this, if it's better than just not having
                               // function here at all and just having the child functions
                               // have them anyways (not virtual)
   char getChar();


 private:
   char mChar;
   //char shape[5][5];

};

class T : Block {
   int index = 0;
   int startRow = 1;
   char shape[4][5][5]={{{'*','*','*', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','X','X', 'X', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','X','X', 'X', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','X','X', 'X', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','*', '*', '*'}}};
};

class O : Block {
   int index = 0;
   int startRow = 2;
   char shape[4][5][5]={{{'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','*', '*', '*'}}};
};

class J : Block {
   int index = 0;
   int startRow = 1;
   char shape[4][5][5]={{{'*','*','*', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','X','X', 'X', '*'},
                         {'*','*','*', 'X', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','X','X', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','X','*', '*', '*'},
                         {'*','X','X', 'X', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'}}};
};

class L : Block {
   int index = 0;
   int startRow = 1;
   char shape[4][5][5]={{{'*','*','*', '*', '*'},
                         {'*','X','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','*', 'X', '*'},
                         {'*','X','X', 'X', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','X','X', 'X', '*'},
                         {'*','X','*', '*', '*'},
                         {'*','*','*', '*', '*'}}};
};

class I : Block {
   int index = 0;
   int startRow = 2;
   char shape[4][5][5]={{{'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','X','X', 'X', 'X'},
                         {'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','X','X', 'X', 'X'},
                         {'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','*', '*', '*'}}};
};

class Z : Block {
   int index = 0;
   int startRow = 2;
   char shape[4][5][5]={{{'*','*','*', '*', '*'},
                         {'*','X','X', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','*', 'X', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','X','X', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','X','X', '*', '*'},
                         {'*','X','*', '*', '*'},
                         {'*','*','*', '*', '*'}}};
};

class S : Block {
   int index = 0;
   int startRow = 2;
   char shape[4][5][5]={{{'*','*','*', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','X','X', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','*','*', 'X', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','*','*', '*', '*'},
                         {'*','*','X', 'X', '*'},
                         {'*','X','X', '*', '*'},
                         {'*','*','*', '*', '*'}},

                        {{'*','*','*', '*', '*'},
                         {'*','X','*', '*', '*'},
                         {'*','X','X', '*', '*'},
                         {'*','*','X', '*', '*'},
                         {'*','*','*', '*', '*'}}};
};

void initializeBoard(char board[20][10], char fillChar);
void displayBoard(char board[20][10]);

#endif